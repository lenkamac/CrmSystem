{% extends "base.html" %}
{% load static %}
{% block title %}Manage Teams{% endblock %}

{% block content %}

    {% block css %}
    	<link rel="stylesheet" href="{% static 'styles.css' %}">
    {% endblock %}

    {% include 'core/partials/offcanvas_menu.html' %}

<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h3 mb-0">Manage Teams</h1>
    <a class="btn btn-primary" href="{% url 'core:team_add' %}">Create team</a>
  </div>

  {% if messages %}
    <div class="mb-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags|default:'info' }} mb-2">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="card">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead>
          <tr>
            <th>Name</th>
            <th>Client</th>
            <th>Status</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for team in teams %}
            <tr>
              <td>{{ team.name }}</td>
              <td>{{ team.client|default:"â€”" }}</td>
              <td>
                {% if team.is_active %}
                  <span class="badge text-bg-success">Active</span>
                {% else %}
                  <span class="badge text-bg-secondary">Inactive</span>
                {% endif %}
              </td>
              <td class="text-end">
                <a class="btn btn-sm btn-outline-secondary" href="{% url 'core:team_edit' team.pk %}">Edit</a>
                <a class="btn btn-sm btn-outline-primary" href="{% url 'core:team_members' team.pk %}">Members</a>

                <form class="d-inline" method="post" action="{% url 'core:team_toggle_active' team.pk %}">
                  {% csrf_token %}
                  {% if team.is_active %}
                    <button class="btn btn-sm btn-outline-warning" type="submit">Deactivate</button>
                  {% else %}
                    <button class="btn btn-sm btn-outline-success" type="submit">Activate</button>
                  {% endif %}
                </form>
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="4" class="text-center py-4 text-muted">No teams yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}